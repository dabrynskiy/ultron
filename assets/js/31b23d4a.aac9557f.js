"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[751],{8742:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var s=n(4848),o=n(8453);const i={sidebar_position:6},r="Custom assertions",a={id:"common/customassertion",title:"Custom assertions",description:"Our applications are not perfect. It's often happens, that some action has no result. Mostly, this",source:"@site/docs/common/customassertion.md",sourceDirName:"common",slug:"/common/customassertion",permalink:"/ultron/docs/common/customassertion",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Boolean result",permalink:"/ultron/docs/common/boolean"},next:{title:"Result handler",permalink:"/ultron/docs/common/resulthandler"}},l={},c=[{value:"Few words about timeouts",id:"few-words-about-timeouts",level:3}];function d(e){const t={code:"code",h1:"h1",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"custom-assertions",children:"Custom assertions"}),"\n",(0,s.jsx)(t.p,{children:"Our applications are not perfect. It's often happens, that some action has no result. Mostly, this\nproblem connected with bad app design and test device freeze."}),"\n",(0,s.jsx)(t.p,{children:"All Ultron operations (Espresso, Web, UiAutomator and Compose) has an ability to be asserted by\ncustom logic."}),"\n",(0,s.jsx)(t.p,{children:"For example, you need to assert that some element appears after click. If it's not you need to\nrepeat the click action."}),"\n",(0,s.jsx)(t.p,{children:"You can do it like:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-kotlin",children:'button.withAssertion("Assert smth is displayed") {\n    title.isDisplayed()\n}.click()\n'})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:'"Assert smth is displayed"'})," - is the name of assertion an you will see it in case of exception."]}),"\n",(0,s.jsx)(t.p,{children:"You can skip it and write shorter:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-kotlin",children:"button.withAssertion {\n    title.isDisplayed()\n}.click()\n"})}),"\n",(0,s.jsx)(t.p,{children:"By default all Ultron operations inside assertion block are not logged in logcat, but don't worry!\nYou will see it result in case of exception."}),"\n",(0,s.jsxs)(t.p,{children:["If you want to have everything in logcat, use ",(0,s.jsx)(t.code,{children:"isListened"})," param"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-kotlin",children:"button.withAssertion(isListened = true) { .. }\n"})}),"\n",(0,s.jsx)(t.h3,{id:"few-words-about-timeouts",children:"Few words about timeouts"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Please note: it is really important to understand the timeouts of operation and assertion."})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"withAssertion {..}"})," may double the time of failure. This happens because an operation is executed\nat least twice. And the assertion block is also executed twice. It's required to make sure that the\nfailure is a proper failure."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"In case an operation is executed successfully but an assertion fails you may have several interactions of the operation and the assertion."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["You may restrict the assertion time by using Ultron ",(0,s.jsx)(t.code,{children:"withTimeout()"})," method, e.g."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-kotlin",children:"button.withAssertion {\n    title.withTimeout(3_000L).isDisplayed()\n}.click()\n"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"You still can extend operation timeout"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-kotlin",children:"button.withTimeout(10_000L).withAssertion {\n    title.withTimeout(2_000L).isDisplayed()\n}.click()\n"})})]})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>a});var s=n(6540);const o={},i=s.createContext(o);function r(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);